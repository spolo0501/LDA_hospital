# 📊 資料清理版本對比

**生成日期**: 2025-10-28

---

## 🎯 兩個版本說明

### 版本 1: 移除重複版本
```
腳本: clean_and_merge_hospitals.py
輸出: cleaned_data/final_cleaned_sample.csv
樣本數: 2,932 條
```

**特點**:
- ✅ 移除重複的評論ID
- ✅ 移除重複的評論內容（同一作者+評分+內容）
- ✅ 確保資料的獨立性
- ⚠️ 資料量較少

### 版本 2: 保留重複版本 ⭐ **推薦**
```
腳本: clean_and_merge_hospitals_no_dedup.py
輸出: cleaned_data_no_dedup/final_cleaned_sample_no_dedup.csv
樣本數: 3,363 條
```

**特點**:
- ✅ 保留所有評論
- ✅ 資料量更大
- ✅ 可能包含更多資訊
- ⚠️ 可能有少量重複

---

## 📈 詳細對比

| 指標 | 版本1 (移除重複) | 版本2 (保留重複) | 差異 |
|------|-----------------|-----------------|------|
| **最終樣本數** | 2,932 條 | 3,363 條 | +431 條 (+14.7%) |
| **檔案大小** | 1.6 MB | 1.8 MB | +0.2 MB |
| **保留率** | 11.7% | 13.4% | +1.7% |
| **平均長度** | 427.1 字元 | 436.8 字元 | +9.7 字元 |
| **中位數長度** | 243 字元 | 253 字元 | +10 字元 |

---

## ⭐ 評分分布對比

### 版本1 (移除重複)
```
⭐⭐⭐⭐⭐  51.6%  ████████████████████████████████████████████████████
⭐         34.9%  ███████████████████████████████████
⭐⭐        4.9%  █████
⭐⭐⭐⭐    4.6%  █████
⭐⭐⭐      3.9%  ████
```

| 評分 | 數量 | 百分比 |
|------|------|--------|
| 5星 | 1,514 | 51.6% |
| 1星 | 1,024 | 34.9% |
| 2星 | 143 | 4.9% |
| 4星 | 136 | 4.6% |
| 3星 | 115 | 3.9% |

### 版本2 (保留重複) ⭐
```
⭐⭐⭐⭐⭐  50.0%  ██████████████████████████████████████████████████
⭐         36.3%  ████████████████████████████████████
⭐⭐        5.2%  █████
⭐⭐⭐⭐    4.3%  ████
⭐⭐⭐      4.1%  ████
```

| 評分 | 數量 | 百分比 |
|------|------|--------|
| 5星 | 1,683 | 50.0% |
| 1星 | 1,221 | 36.3% |
| 2星 | 176 | 5.2% |
| 4星 | 145 | 4.3% |
| 3星 | 138 | 4.1% |

**觀察**: 評分分布非常相似，版本2的負面評論（1星）比例略高。

---

## 🏥 醫院分布對比（Top 10）

### 版本1 (移除重複)
| 醫院 | 數量 | 百分比 |
|------|------|--------|
| AdventHealth Orlando | 980 | 33.4% |
| Hackensack Univ Medical Center | 203 | 6.9% |
| Cleveland Clinic OH | 196 | 6.7% |
| Houston Methodist Hospital | 177 | 6.0% |
| Cedars-Sinai Medical Center | 143 | 4.9% |

### 版本2 (保留重複) ⭐
| 醫院 | 數量 | 百分比 |
|------|------|--------|
| AdventHealth Orlando | 995 | 29.6% |
| Hackensack Univ Medical Center | 209 | 6.2% |
| Cleveland Clinic OH | 196 | 5.8% |
| Cleveland Clinic | 191 | 5.7% |
| Houston Methodist Hospital | 181 | 5.4% |

**觀察**: 版本2的醫院分布更均勻，AdventHealth Orlando 的比例從 33.4% 降至 29.6%。

---

## 📊 清理流程對比

### 共同步驟

| 步驟 | 版本1 | 版本2 | 說明 |
|------|-------|-------|------|
| 1. 合併 | 25,132 | 25,132 | 相同 |
| 2. 清除空白 | 15,649 | 15,649 | 相同 |
| 3. 最近一年 | 3,363 | 3,363 | 相同 |

### 關鍵差異

| 步驟 | 版本1 | 版本2 | 差異 |
|------|-------|-------|------|
| 4. 去重 | ❌ 移除 431 條 | ⏭️ 跳過 | **關鍵差異** |
| 最終結果 | 2,932 條 | 3,363 條 | +431 條 |

---

## 💡 重複資料分析

版本1 移除了 **431 條重複評論**：

### 重複類型
1. **重複ID** (51條): 同一評論被多次抓取
2. **重複內容** (380條): 不同ID但相同的作者+評分+內容

### 重複原因推測
- 評論被更新或編輯
- 同一醫院有多個Google Maps頁面
- 抓取時間差異導致的重複
- 某些用戶可能發布了相似的評論

---

## 🎯 建議使用場景

### 版本1 (移除重複) - 適用於:
✅ 需要**嚴格獨立性**的統計分析
✅ 進行**因果推論**研究
✅ 需要避免**資料偏差**
✅ 學術論文發表

### 版本2 (保留重複) ⭐ - 適用於:
✅ **探索性資料分析** (EDA)
✅ **文本分析**和主題建模
✅ 需要**更大樣本量**
✅ **初步研究**和趨勢分析
✅ **實務應用**和管理建議

---

## 📁 檔案位置

### 版本1
```
cleaned_data/
├── final_cleaned_sample.csv               # 最終樣本
├── cleaning_report.txt                    # 清理報告
└── step*.csv                              # 中間步驟
```

### 版本2 ⭐
```
cleaned_data_no_dedup/
├── final_cleaned_sample_no_dedup.csv      # 最終樣本
├── cleaning_report_no_dedup.txt           # 清理報告
└── step*.csv                              # 中間步驟
```

---

## 🚀 如何選擇？

### 快速決策樹

```
需要最大樣本量？
  └─ 是 → 使用版本2 ⭐
  └─ 否 → 繼續

進行統計檢定或因果分析？
  └─ 是 → 使用版本1
  └─ 否 → 使用版本2 ⭐

發表學術論文？
  └─ 是 → 使用版本1
  └─ 否 → 使用版本2 ⭐

實務應用或探索性分析？
  └─ 是 → 使用版本2 ⭐
```

---

## 💭 綜合建議

### 🌟 推薦使用版本2（保留重複）

**理由**:
1. ✅ **樣本量更大** (3,363 vs 2,932)，統計效力更高
2. ✅ **重複比例低** (431/3363 = 12.8%)，影響有限
3. ✅ **評分分布相似**，不會造成偏差
4. ✅ **適用範圍更廣**，特別是文本分析

### 特殊情況使用版本1

僅在以下情況使用版本1：
- 進行嚴格的統計推論
- 需要確保每筆資料完全獨立
- 學術期刊要求無重複資料

---

## 📞 重新生成資料

### 生成版本1（移除重複）
```bash
python3 clean_and_merge_hospitals.py
```

### 生成版本2（保留重複）⭐
```bash
python3 clean_and_merge_hospitals_no_dedup.py
```

### 修復環境（如需要）
```bash
./fix_ide_env.sh
```

---

**更新日期**: 2025-10-28
**推薦版本**: 版本2（保留重複）⭐
**下一步**: 開始資料分析！
